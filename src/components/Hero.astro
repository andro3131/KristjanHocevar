---
import { loadContent } from "../utils/content";
import type { HeroContent } from "../types/content";

const hero = loadContent<HeroContent>("hero");
---

<section id="hero" class="relative min-h-screen flex items-center overflow-hidden">
  <!-- Ozadje s parallax -->
  <div class="absolute inset-0">
    <img
      id="hero-parallax"
      src={hero.image}
      alt={hero.imageAlt}
      class="hero-zoom w-full h-[120%] object-cover object-[57%_top] md:object-top will-change-transform"
      loading="eager"
    />
    <!-- Gradient overlay -->
    <div class="absolute inset-0 bg-gradient-to-b from-bg/30 via-transparent to-bg/60"></div>
    <div class="absolute inset-0 bg-gradient-to-r from-bg/60 via-bg/10 to-transparent"></div>
  </div>

  <!-- Vsebina - levo poravnano -->
  <div class="relative z-10 text-left px-6 md:px-16 lg:px-24 mt-20 max-w-3xl">
    <h1 class="hero-float font-serif text-6xl md:text-8xl lg:text-9xl font-bold mb-4 tracking-tight">
      <span class="hero-word inline-block">{hero.title}</span>
      <br />
      <span class="hero-word inline-block text-accent" style="animation-delay: 0.15s">{hero.subtitle}</span>
    </h1>
    <p class="hero-word text-lg md:text-xl text-muted tracking-[0.3em] uppercase mb-10" style="animation-delay: 0.3s">
      {hero.tagline}
    </p>
    <div class="hero-word flex flex-col sm:flex-row items-start gap-4" style="animation-delay: 0.45s">
      {hero.buttons.map((btn) => (
        <a
          href={btn.link}
          class={btn.style === "primary"
            ? "btn-fill-reverse px-8 py-3 bg-accent text-bg font-semibold tracking-wider uppercase text-sm rounded-sm"
            : "btn-fill px-8 py-3 border border-text/30 text-text font-semibold tracking-wider uppercase text-sm rounded-sm"
          }
        >
          {btn.text}
        </a>
      ))}
    </div>
  </div>

  <!-- Scroll indikator -->
  <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-10">
    <div class="w-6 h-10 border-2 border-text/30 rounded-full flex justify-center">
      <div class="w-1 h-3 bg-text/50 rounded-full mt-2 animate-bounce"></div>
    </div>
  </div>
</section>

<style>
  @keyframes heroSlideIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }
    50% {
      opacity: 1;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .hero-word {
    opacity: 0;
    animation: heroSlideIn 0.8s ease-out forwards;
  }

  @keyframes heroFloat {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  .hero-float {
    animation: heroFloat 4s ease-in-out infinite;
    animation-delay: 1s;
  }

  @keyframes heroZoom {
    0% {
      transform: scale(1.15);
    }
    100% {
      transform: scale(1);
    }
  }

  .hero-zoom {
    animation: heroZoom 3s ease-out forwards;
  }
</style>

<script>
  // Parallax efekt na hero sliki
  const heroImg = document.getElementById("hero-parallax");
  const heroSection = document.getElementById("hero");

  if (heroImg && heroSection) {
    window.addEventListener("scroll", () => {
      const scrollY = window.scrollY;
      const heroHeight = heroSection.offsetHeight;
      if (scrollY <= heroHeight) {
        const offset = scrollY * 0.4;
        heroImg.style.transform = `translateY(${offset}px)`;
      }
    }, { passive: true });
  }
</script>
